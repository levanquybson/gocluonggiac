<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Góc lượng giác — Trực quan chuyên nghiệp</title>
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <!-- MathJax -->
  <script>
    window.MathJax = { tex: { inlineMath: [['\\(','\\)'], ['$', '$']] } };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    :root{
      --bg1:#eef4ff; --bg2:#fffef6; --card:#ffffffcc; --border:#e6ecf2;
      --shadow:0 8px 24px rgba(0,0,0,.08); --primary:#1e88e5; --primary-600:#1565c0;
      --axis:#8d99ae; --pos:#1976d2; --neg:#d32f2f;
    }
    body{
      font-family:"Inter",sans-serif;
      background:#f6f8ff;
      margin:0;padding:28px;color:#0f172a;
    }
    h1{text-align:center;margin:0 0 18px;font-weight:800;color:var(--primary-600)}
    #layout{display:flex;gap:18px;justify-content:center;align-items:flex-start;flex-wrap:wrap}
    #leftCol{
      width:340px;background:var(--card);border:1px solid var(--border);border-radius:16px;
      box-shadow:var(--shadow);padding:16px;display:flex;flex-direction:column;gap:14px;
      backdrop-filter:blur(6px);
    }
    .panel-title{font-weight:700;color:#0b2a4a;margin-bottom:4px}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .row label{font-weight:600;min-width:84px}
    input{
      flex:1;padding:9px 12px;border:1px solid #cbd5e1;border-radius:12px;
      font-size:1rem;text-align:center;background:#fff;
    }
    input[readonly]{background:#f6f7fb;color:#334155;border-style:dashed}
    button{padding:9px 16px;border:none;background:var(--primary);color:#fff;
      border-radius:12px;font-size:1rem;cursor:pointer;font-weight:600}
    #info{font-weight:700;color:#0b2a4a;background:#f1f5ff;border:1px dashed #c7d7ff;
      padding:10px;border-radius:12px;line-height:1.4}
    canvas{background:#fff;border:1px solid #e5e7eb;border-radius:16px;box-shadow:var(--shadow);cursor:grab}
    canvas:active{cursor:grabbing}
    .formula{color:#334155;font-size:.95rem;text-align:center}
    .note{font-size:.85rem;color:#64748b}
  
body {
      margin: 0;
      font-family: Arial, sans-serif;
    }
    footer {
      position: fixed;
      bottom: 0;
      width: 100%;
      text-align: center;
      padding: 10px;
      font-size: 14px;
      background: #f0f0f0;
      color: #333;
      border-top: 1px solid #ccc;

      /* chống copy / bôi đen */
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }




</style>
</head>
<body>
  <h1>ĐỊNH NGHĨA GÓC LƯỢNG GIÁC</h1>
<div style="text-align:center; color:red; font-weight:bold; font-style:italic; font-size:1.2rem; margin-top:16px;">
  “Lượng giác là ngôn ngữ của dao động và vòng tròn.”
</div>

  <div id="layout">
    <aside id="leftCol">
      <div class="panel-title">Nhập & thông tin</div>
      <div class="row">
        <label>Độ (°):</label>
        <input type="number" id="degInput" value="0" step="1">
      </div>
      <div class="row">
        <label>Radian:</label>
        <input type="text" id="radInput" value="0" readonly>
      </div>
      <div class="row">
        <label>Góc xOy (°):</label>
        <input type="number" id="betaInput" value="45" step="1">
      </div>
    <div id="info">
  α = <span id="degShow">0</span> (<span id="radShow">0</span> rad)<br>
  k = <span id="kShow">0</span> vòng quay<br>
  chiều <span id="sgnShow">0</span>
</div>
      <div class="row">
        <button id="resetBtn">Đưa về 0°</button>
      </div>
      <div class="formula">
        Công thức quy đổi: \( \alpha^{\circ} = \dfrac{\alpha\pi}{180}\,\text{rad} \)
        <div class="note"></div>
      </div>
    </aside>
    <section id="rightCol">
      <canvas id="board" width="760" height="540"></canvas>
    </section>
  </div>

<script>
const canvas=document.getElementById('board');
const ctx=canvas.getContext('2d');
const cx=canvas.width/2, cy=canvas.height/2;
const degInput=document.getElementById('degInput');
const radInput=document.getElementById('radInput');
const betaInput=document.getElementById('betaInput');
const degShow=document.getElementById('degShow');
const radShow=document.getElementById('radShow');
const kShow=document.getElementById('kShow');
const sgnShow=document.getElementById('sgnShow');
const resetBtn=document.getElementById('resetBtn');

let alphaDeg=0, betaDeg=45;
let dragging=false,lastRaw=0,ignoreSync=false;
const toRad=d=>d*Math.PI/180,toDeg=r=>r*180/Math.PI;

function gcd(a,b){a=Math.abs(a);while(b){[a,b]=[b,a%b]}return a||1}
function degToPiFrac(deg){
  if(deg===0)return "0";
  const sign=deg<0?"-":"";let num=Math.abs(Math.round(deg)),den=180;
  const g=gcd(num,den);num/=g;den/=g;
  if(den===1)return sign+(num===1?"π":num+"π");
  return sign+(num===1?"π":num+"π")+"/"+den;
}

function drawAxes(){
  ctx.save();
  // Ox
  ctx.beginPath();
  ctx.moveTo(cx, cy);
  ctx.lineTo(canvas.width-24, cy);
  ctx.strokeStyle = "#0f172a";   // đậm hơn
  ctx.lineWidth = 2.4;           // dày hơn
  ctx.stroke();
  ctx.fillStyle="#0b2a4a"; ctx.font="14px Inter";
  ctx.fillText('x', canvas.width-36, cy-10);

  // Oy (dùng góc betaDeg)
  const len=270, ang=toRad(betaDeg);
  const xOy=cx+len*Math.cos(ang), yOy=cy-len*Math.sin(ang);
  ctx.beginPath();
  ctx.moveTo(cx,cy);
  ctx.lineTo(xOy,yOy);
  ctx.strokeStyle = "#0f172a";   // đậm hơn
  ctx.lineWidth = 2.4;           // dày hơn
  ctx.stroke();
  ctx.fillText('y', xOy+8, yOy+4);

  // gốc O
  ctx.beginPath();
  ctx.arc(cx,cy,3,0,2*Math.PI);
  ctx.fillStyle='#000'; ctx.fill();
  ctx.fillText('O', cx-18, cy+16);
  ctx.restore();
}
function drawOM(){
  const r=220, rad=toRad(alphaDeg);
  const Mx=cx+r*Math.cos(rad), My=cy-r*Math.sin(rad);
  ctx.beginPath();ctx.moveTo(cx,cy);ctx.lineTo(Mx,My);
  ctx.strokeStyle="#00897b";ctx.lineWidth=2;ctx.stroke();
  ctx.beginPath();ctx.arc(Mx,My,6,0,2*Math.PI);ctx.fillStyle="#00bcd4";ctx.fill();
  ctx.fillText("M", Mx+10, My-10);
}
function drawArrowHead(x,y,dx,dy,color){
  const L=Math.hypot(dx,dy);if(L<1e-6)return;dx/=L;dy/=L;
  ctx.save();ctx.translate(x,y);ctx.rotate(Math.atan2(dy,dx));
  ctx.beginPath();ctx.moveTo(0,0);ctx.lineTo(-9,4.5);ctx.lineTo(-9,-4.5);ctx.closePath();
  ctx.fillStyle=color;ctx.fill();ctx.restore();
}
function niceHsl(isPos,t){
  const hue=isPos?210:0;const sat=70;const light=62-22*t;
  return `hsl(${hue} ${sat}% ${light}%)`;
}
function drawSpiral(rad){
  const dir=rad>=0?1:-1,isPos=dir>0;const a=10,b=3,absR=Math.abs(rad);
  ctx.save();ctx.lineWidth=1.8;let prevX,prevY;const step=0.045;
  for(let t=0;t<=absR+1e-6;t+=step){
    const ratio=Math.min(1,t/absR),r=a+b*t;
    const x=cx+r*Math.cos(dir*t),y=cy-r*Math.sin(dir*t);
    if(t===0){prevX=x;prevY=y;continue;}
    ctx.beginPath();ctx.moveTo(prevX,prevY);ctx.lineTo(x,y);
    ctx.strokeStyle=niceHsl(isPos,ratio);ctx.stroke();prevX=x;prevY=y;
  }
  const t=absR,r=a+b*t,x1=cx+r*Math.cos(dir*t),y1=cy-r*Math.sin(dir*t);
  const dt=0.001,r2=a+b*(t+dt);
  const x2=cx+r2*Math.cos(dir*(t+dt)),y2=cy-r2*Math.sin(dir*(t+dt));
  drawArrowHead(x1,y1,x2-x1,y2-y1,niceHsl(isPos,.92));
  ctx.fillStyle=niceHsl(isPos,.4);ctx.font='16px Inter';ctx.fillText('α',x1+14,y1+16);ctx.restore();
}
function drawArc(){
  const rad=toRad(alphaDeg);if(Math.abs(rad)<1e-6)return;
  if(Math.abs(rad)<2*Math.PI){
    const r=40,steps=Math.max(28,Math.ceil(Math.abs(rad)/0.045)),isPos=rad>=0;
    ctx.save();ctx.lineWidth=1.8;let prevX=cx+r,prevY=cy;
    for(let i=1;i<=steps;i++){
      const t=(i/steps)*rad,x=cx+r*Math.cos(t),y=cy-r*Math.sin(t),ratio=i/steps;
      ctx.beginPath();ctx.moveTo(prevX,prevY);ctx.lineTo(x,y);
      ctx.strokeStyle=niceHsl(isPos,ratio);ctx.stroke();prevX=x;prevY=y;
    }
    const t=rad,s=Math.sign(rad)||1,x=cx+r*Math.cos(t),y=cy-r*Math.sin(t);
    const dx=-s*r*Math.sin(t),dy=-s*r*Math.cos(t);
    drawArrowHead(x,y,dx,dy,niceHsl(isPos,.95));
    const mid=rad/2;ctx.fillStyle=niceHsl(isPos,.35);ctx.font='16px Inter';
    ctx.fillText('α',cx+(r+22)*Math.cos(mid),cy-(r+22)*Math.sin(mid));ctx.restore();
  } else drawSpiral(rad);
}
function redraw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawAxes();drawArc();drawOM();

  const dInt = Math.round(alphaDeg);
  // số vòng quay (dùng floor để đúng cả âm)
  const k = Math.floor(dInt / 360);
  const base = dInt - k*360;   // base ∈ [0,359]

  const sign = alphaDeg>0?"dương":(alphaDeg<0?"âm":"0");

  // --- Hiển thị độ ---
  let degDisplay = base + "°";
  if (k !== 0) {
    degDisplay += (k > 0 ? " + " : " − ") + Math.abs(k) + "·360°";
  }
  degShow.textContent = degDisplay;

  // --- Hiển thị radian ---
  let radDisplay = degToPiFrac(base);
  if (k !== 0) {
    radDisplay += (k > 0 ? " + " : " − ") + Math.abs(k) + "·2π";
  }
  radShow.textContent = radDisplay;

  // --- Hiển thị k và chiều ---
  kShow.textContent   = k;
  sgnShow.textContent = sign;

  if(!ignoreSync){
    ignoreSync=true;
    degInput.value = dInt;
    radInput.value = degToPiFrac(dInt); // rad đầy đủ chưa tách k
    betaInput.value = betaDeg;
    ignoreSync=false;
  }
}
function getPos(evt){const rect=canvas.getBoundingClientRect();
  const clientX=evt.touches?evt.touches[0].clientX:evt.clientX;
  const clientY=evt.touches?evt.touches[0].clientY:evt.clientY;
  return {x:clientX-rect.left,y:clientY-rect.top};}
function rawAngleDegAt(p){return toDeg(Math.atan2(cy-p.y,p.x-cx));}
function onDown(e){const p=getPos(e),r=220,Mx=cx+r*Math.cos(toRad(alphaDeg)),My=cy-r*Math.sin(toRad(alphaDeg));
  if(Math.hypot(p.x-Mx,p.y-My)<14){dragging=true;lastRaw=rawAngleDegAt(p);}}
function onMove(e){if(!dragging)return;const p=getPos(e),now=rawAngleDegAt(p);
  let d=now-lastRaw;if(d>180)d-=360;if(d<-180)d+=360;alphaDeg+=d;lastRaw=now;redraw();}
function onUp(){dragging=false;}
degInput.addEventListener("input",()=>{if(ignoreSync)return;alphaDeg=parseInt(degInput.value)||0;redraw();});
betaInput.addEventListener("input",()=>{if(ignoreSync)return;betaDeg=parseInt(betaInput.value)||45;redraw();});
resetBtn.addEventListener("click",()=>{alphaDeg=0;redraw();});
canvas.addEventListener("mousedown",onDown);
canvas.addEventListener("mousemove",onMove);
window.addEventListener("mouseup",onUp);
canvas.addEventListener("touchstart",onDown,{passive:false});
canvas.addEventListener("touchmove",onMove,{passive:false});
window.addEventListener("touchend",onUp);
redraw();
</script>
</script>


<meta charset="UTF-8">
<footer id="copyright"></footer>

<script>
  // Base64 đúng (chữ Quý)
  const b64Copyright = "wqkgMjAyNSBMw6ogVsSDbiBRdcO9K0dQVC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4=";

  const bytes = Uint8Array.from(atob(b64Copyright), c => c.charCodeAt(0));
  const text  = new TextDecoder("utf-8").decode(bytes);

  // Kiểm tra nhanh trên console: phải in đúng "© 2025 Lê Văn Quý+GPT. All rights reserved."
  console.log(text);

  document.getElementById("copyright").textContent = text;

  // (tuỳ chọn) chặn chuột phải & Ctrl+C như bạn đã làm
  document.addEventListener("contextmenu", e => e.preventDefault());
  document.addEventListener("keydown", e => {
    if (e.ctrlKey && e.key.toLowerCase() === "c") {
      e.preventDefault();
      alert("!");
    }
  });
</script>
</body>
</html>
